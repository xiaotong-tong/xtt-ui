var A=Object.defineProperty;var w=Object.getPrototypeOf;var N=Reflect.get;var k=(r,e,t)=>e in r?A(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(k(r,typeof e!="symbol"?e+"":e,t),t),v=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var S=(r,e,t)=>(v(r,e,"read from private field"),t?t.call(r):e.get(r)),d=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var c=(r,e,t)=>(v(r,e,"access private method"),t),m=(r,e,t)=>N(w(r),t,e);import{x as R}from"./reflect.u-rLhaQE.js";import{b as E}from"./xtt-ui-utils.BGf_aNN0.js";import"./base.C5bbslE4.js";const b=new CSSStyleSheet;b.replaceSync(':host {--hl-font-color:inherit;--hl-font-color-hover:inherit;--hl-highlight-color:#ce9178;}:host([type="primary"]) {--hl-font-color:var(--primary-color);--hl-font-color-hover:var(--primary-light-color);}:host([type="success"]) {--hl-font-color:var(--success-color);--hl-font-color-hover:var(--success-light-color);}:host([type="danger"]) {--hl-font-color:var(--danger-color);--hl-font-color-hover:var(--danger-light-color);}:host([type="warning"]) {--hl-font-color:var(--warning-color);--hl-font-color-hover:var(--warning-light-color);}:host {display:inline;color:var(--hl-font-color,inherit);}@media (hover:hover) {:host(:hover) {color:var(--hl-font-color-hover,inherit);}}:host ::highlight(xtt-highlight) {color:#ce9178;}');var o,n,a,C;const h=class h extends R{constructor(){super(...arguments);d(this,o);d(this,a);i(this,"hlName")}static get observedAttributes(){return["search"]}connectedCallback(){super.connectedCallback(),this.hlName="xtt-highlight-"+E();const t=new CSSStyleSheet;t.replaceSync(`:host ::highlight(${this.hlName}) { color: var(--hl-highlight-color, #ce9178); }`),shadow.adoptedStyleSheets.push(t),c(this,o,n).call(this)}attributeChangedCallback(t,g,s){var l;t==="search"&&(this.search=s),(l=super.attributeChangedCallback)==null||l.call(this,t,g,s)}_reflectElementAdded(){c(this,o,n).call(this)}get type(){return this.getAttribute("type")}set type(t){if(t===null){this.removeAttribute("type");return}this.type!==t&&this.setAttribute("type",t)}get search(){return this.getAttribute("search")}set search(t){if(t===null){this.removeAttribute("search");return}this.search!==t&&(this.setAttribute("search",t),c(this,o,n).call(this))}};o=new WeakSet,n=function(){if(!CSS.highlights){console.error("当前环境不支持 CSS.highlights");return}const t=this.childNodes,g=S(this,a,C),s=[];t.forEach(p=>{for(const u of p.nodeValue.matchAll(g)){const f=new Range;f.setStart(p,u.index),f.setEnd(p,u.index+u[0].length),s.push(f)}});const l=new Highlight(...s);CSS.highlights.set(this.hlName,l)},a=new WeakSet,C=function(){return new RegExp(this.search??"","g")},i(h,"templateContent","<slot></slot>"),i(h,"stylesContent",[...m(h,h,"stylesContent"),b]);let y=h;customElements.define("xtt-text-hl",y);
