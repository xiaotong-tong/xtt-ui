var k=Object.defineProperty;var w=Object.getPrototypeOf;var R=Reflect.get;var x=(r,e,t)=>e in r?k(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var n=(r,e,t)=>(x(r,typeof e!="symbol"?e+"":e,t),t),v=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var i=(r,e,t)=>(v(r,e,"read from private field"),t?t.call(r):e.get(r)),a=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var g=(r,e,t)=>(v(r,e,"access private method"),t),S=(r,e,t)=>R(w(r),t,e);import{x as $}from"./reflect.u-rLhaQE.js";import{b as q}from"./xtt-ui-utils.BGf_aNN0.js";import"./base.C5bbslE4.js";const A=new CSSStyleSheet;A.replaceSync(':host {--hl-font-color:inherit;--hl-font-color-hover:inherit;}:host([type="primary"]) {--hl-font-color:var(--primary-color);--hl-font-color-hover:var(--primary-light-color);}:host([type="success"]) {--hl-font-color:var(--success-color);--hl-font-color-hover:var(--success-light-color);}:host([type="danger"]) {--hl-font-color:var(--danger-color);--hl-font-color-hover:var(--danger-light-color);}:host([type="warning"]) {--hl-font-color:var(--warning-color);--hl-font-color-hover:var(--warning-light-color);}:host {display:inline;color:var(--hl-font-color,inherit);}@media (hover:hover) {:host(:hover) {color:var(--hl-font-color-hover,inherit);}}');var E=`<style id="style"></style><slot></slot>
`,s,f,l,u,d,N;const h=class h extends ${constructor(){super(...arguments);a(this,s);a(this,l);a(this,d);n(this,"hlName","xtt-highlight-"+q())}static get observedAttributes(){return["search","search-color"]}connectedCallback(){super.connectedCallback(),i(this,s,f).textContent||(i(this,s,f).textContent=`:host ::highlight(${this.hlName}) { color: hsl(45deg 100% 50%); }`),g(this,l,u).call(this)}disconnectedCallback(){CSS.highlights.has(this.hlName)&&CSS.highlights.delete(this.hlName),super.disconnectedCallback()}attributeChangedCallback(t,p,o){var c;t==="search"?this.search=o:t==="search-color"&&(this.searchColor=o),(c=super.attributeChangedCallback)==null||c.call(this,t,p,o)}_reflectElementAdded(){g(this,l,u).call(this)}get type(){return this.getAttribute("type")}set type(t){if(t===null){this.removeAttribute("type");return}this.type!==t&&this.setAttribute("type",t)}get search(){return this.getAttribute("search")}set search(t){if(t===null){this.removeAttribute("search");return}this.search!==t&&(this.setAttribute("search",t),g(this,l,u).call(this))}get searchColor(){return this.getAttribute("search-color")}set searchColor(t){if(t===null){this.removeAttribute("search-color");return}this.searchColor!==t&&this.setAttribute("search-color",t),i(this,s,f).textContent=`:host ::highlight(${this.hlName}) { color: ${t}; }`}};s=new WeakSet,f=function(){return this.shadowRoot.querySelector("style")},l=new WeakSet,u=function(){if(!CSS.highlights){console.error("当前环境不支持 CSS.highlights");return}const t=this.childNodes,p=i(this,d,N),o=[];t.forEach(y=>{for(const C of y.nodeValue.matchAll(p)){const b=new Range;b.setStart(y,C.index),b.setEnd(y,C.index+C[0].length),o.push(b)}});const c=new Highlight(...o);CSS.highlights.set(this.hlName,c)},d=new WeakSet,N=function(){return new RegExp(this.search??"","g")},n(h,"templateContent",E),n(h,"stylesContent",[...S(h,h,"stylesContent"),A]);let m=h;customElements.define("xtt-text-hl",m);
