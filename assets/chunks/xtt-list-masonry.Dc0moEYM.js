var D=Object.defineProperty;var I=Object.getPrototypeOf;var V=Reflect.get;var W=(s,e,t)=>e in s?D(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>(W(s,typeof e!="symbol"?e+"":e,t),t),x=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var o=(s,e,t)=>(x(s,e,"read from private field"),t?t.call(s):e.get(s)),n=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},y=(s,e,t,i)=>(x(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);var r=(s,e,t)=>(x(s,e,"access private method"),t),z=(s,e,t)=>V(I(s),t,e);import{x as B}from"./reflect.u-rLhaQE.js";import{c as j}from"./index.esm.qbmuVXDe.js";import"./base.C5bbslE4.js";const T=new CSSStyleSheet;T.replaceSync(":host {--list-padding:8px;--list-border-color:silver;--list-border:thin solid var(--list-border-color);}:host {display:block;overflow:hidden;}#list {width:100%;box-sizing:border-box;position:relative;display:block;border:var(--list-border);padding:var(--list-padding,8px);}ul {margin:0;padding:0;}");const $=new CSSStyleSheet;$.replaceSync(":host {display:block;position:absolute;top:0;left:0;}");var J=`<ul id="list" part="list">
	<slot></slot>
</ul>
`;const d=class d extends B{constructor(){super();l(this,"onChildrenAddedCallback",Function.prototype)}static get observedAttributes(){return[]}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}_reflectElementAdded(t){this.onChildrenAddedCallback(t)}};l(d,"templateContent","<slot></slot>"),l(d,"stylesContent",[...z(d,d,"stylesContent"),$]),l(d,"observeOptions",{childList:!0,subtree:!0});let O=d;var b,S,h,g,u,A,q,v,F,p,k,m,G;const a=class a extends B{constructor(){super();n(this,h);n(this,A);n(this,v);n(this,p);n(this,m);l(this,"columnGap",8);l(this,"rowGap",8);l(this,"colHeights",[]);n(this,b,void 0);n(this,S,t=>{t.role="listitem",r(this,p,k).call(this,t),t.onChildrenAddedCallback=()=>{r(this,p,k).call(this,t)}});n(this,u,0);l(this,"onChildrenAddedCallback",Function.prototype);y(this,b,new ResizeObserver(t=>{for(let i of t)r(this,m,G).call(this,i.borderBoxSize[0])}))}static get observedAttributes(){return["cols"]}connectedCallback(){super.connectedCallback(),o(this,b).observe(o(this,h,g)),r(this,m,G).call(this,o(this,h,g).getBoundingClientRect()),this.querySelectorAll("xtt-list-masonry-item").forEach(o(this,S))}disconnectedCallback(){super.disconnectedCallback(),o(this,b).disconnect()}attributeChangedCallback(t,i,c){t==="cols"&&(this.cols=c)}_reflectElementAdded(t){(t==null?void 0:t.tagName)==="XTT-LIST-MASONRY-ITEM"&&o(this,S).call(this,t),this.onChildrenAddedCallback(t)}get cols(){return this.getAttribute("cols")}set cols(t){if(t===null||t===0||t===""){this.removeAttribute("cols");return}this.cols!==t&&this.setAttribute("cols",t)}};b=new WeakMap,S=new WeakMap,h=new WeakSet,g=function(){return this.shadowRoot.getElementById("list")},u=new WeakMap,A=new WeakSet,q=function(t){return t>=1200?6:t>=800||t>=500?4:(t>=200,2)},v=new WeakSet,F=function(){const t=this.querySelectorAll("xtt-list-masonry-item"),i=o(this,u)||this.cols;this.colHeights=Array(i).fill(0),t.forEach(c=>{r(this,p,k).call(this,c)})},p=new WeakSet,k=function(t){const i=o(this,h,g).getBoundingClientRect(),c=i.inlineSize||i.width,C=o(this,u)||this.cols,f=this.colHeights,w=f.indexOf(Math.min(...f)),N=f[w],H=(c-this.columnGap*(C-1))/C;j(t,{width:H+"px",transform:`translateY(${N}px) translateX(${w*(H+this.columnGap)}px`}),f[w]+=t.offsetHeight+this.rowGap,o(this,h,g).style.height=f.reduce((X,Y)=>Math.max(X,Y))+"px"},m=new WeakSet,G=function(t){const i=t.inlineSize||t.width;let c=r(this,A,q).call(this,i),C={width:i,now:o(this,u),next:c};this.dispatchEvent(new CustomEvent("xtt-resize",{detail:C,bubbles:!1,cancelable:!0})),y(this,u,parseInt(C.next)),r(this,v,F).call(this)},l(a,"templateContent",J),l(a,"stylesContent",[...z(a,a,"stylesContent"),T]),l(a,"observeOptions",{childList:!0,subtree:!0});let R=a;customElements.define("xtt-list-masonry",R);customElements.define("xtt-list-masonry-item",O);
